<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Back to Arch Linux | Ashwin Vishnu&#39;s Website</title>
  <link rel="stylesheet" href="https://ashwin.info.tm/static/m-light.compiled.css" />
  <link rel="stylesheet" href="https://ashwin.info.tm/static/custom.compiled.css" />
  <link rel="icon" href="https://ashwin.info.tm/images/logo_ashwin.png" type="image/png" />
  <link rel="canonical" href="https://ashwin.info.tm/back-to-arch-linux.html" />
  <link href="https://ashwin.info.tm/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ashwin Vishnu&#39;s Website" />
  <link href="https://ashwin.info.tm/feeds/tech-talk.atom.xml" type="application/atom+xml" rel="alternate" title="Ashwin Vishnu&#39;s Website | Tech Talk" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta property="og:site_name" content="Ashwin Vishnu&#39;s Website" />
  <meta property="og:title" content="Back to Arch Linux" />
  <meta name="twitter:title" content="Back to Arch Linux" />
  <meta property="og:url" content="https://ashwin.info.tm/back-to-arch-linux.html" />
  <meta property="og:description" content="Within a Ubuntu LTS pre-installed laptop" />
  <meta name="twitter:description" content="Within a Ubuntu LTS pre-installed laptop" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
  <!-- Mastodon Link verification -->
  <link rel="me" href="https://mastodon.acc.sunet.se/@ashwinvis">

  <!-- indieauth.com -->
  <link rel="me" href="https://github.com/ashwinvis">
  <link rel="pgpkey" href="/static/ashwin.asc">

  <!-- Micropub with indiekit:
    source code: https://github.com/paulrobertlloyd/indiekit
    docs: https://paulrobertlloyd.github.io/indiekit
    fork and deploy as: https://www.heroku.com/deploy?template=https://github.com/ashwinvis/indiekit
  -->
  <link rel="authorization_endpoint" href="https://indieauth.com/auth">
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
  <link rel="micropub" href="https://ashwin-micropub.herokuapp.com/micropub">

  <!-- Webmentions with webmentions.io -->
  <link rel="webmention" href="https://webmention.io/ashwin.info.tm/webmention" />
  <link rel="pingback" href="https://webmention.io/ashwin.info.tm/xmlrpc" />

  <!-- Security -->
  <!-- Stricter version:
   default-src 'none'; font-src https://fontlibrary.org; img-src 'self'; script-src 'self''; style-src 'self'
  -->
  <!-- Milder CSP to permit mathjax, bibbase scripts
  TODO: Find alternate CDN for mathjax
  https://github.com/mathjax/MathJax/issues/256#issuecomment-38032431
  https://docs.mathjax.org/en/v2.7-latest/start.html#using-a-content-delivery-network-cdn
  -->
  <meta http-equiv="Content-Security-Policy"
        content="
        upgrade-insecure-requests;
        default-src https:;
        style-src https://bibbase.org 'unsafe-inline' 'self';
        script-src
          http://ashwinvis.github.io
          http://cdnjs.cloudflare.com
          https://bibbase.org
          http://ajax.googleapis.com
          'unsafe-inline' 'unsafe-eval' 'self';
         font-src https://fontlibrary.org 'self';
         img-src 'unsafe-inline' 'self' https:;
         frame-src https://invidious.snopyta.org https://pixelfed.social https://mastodon.acc.sunet.se https://peertube.social;
         worker-src 'self';
        "
  >


  <!-- Progressive web app -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="ashwin.infoâ„¢">
  <link rel="apple-touch-icon" href="/images/logo_ashwin.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <script src="/app.js" defer></script>
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="https://ashwin.info.tm/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m"><img src="https://ashwin.info.tm/images/logo_ashwin.png" />ashwin.infoâ„¢</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li>
              <a href="https://ashwin.info.tm/archives" id="m-navbar-current">Posts</a>
              <ol>
                <li><a href="https://ashwin.info.tm/category/blog.html">Blog</a></li>
                <li><a href="https://ashwin.info.tm/category/tech-talk.html">Tech Talk</a></li>
              </ol>
            </li>
            <li>
              <a href="https://ashwin.info.tm/feeds/all.atom.xml">Feeds</a>
              <ol>
                <li><a href="https://ashwin.info.tm/feeds/blog.atom.xml">Feeds: Blog</a></li>
                <li><a href="https://ashwin.info.tm/feeds/tech-talk.atom.xml">Feeds: Tech Talk</a></li>
              </ol>
            </li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li>
              <a href="https://ashwin.info.tm/pages/showcase.html">Showcase</a>
              <ol>
                <li><a href="https://ashwin.info.tm/pages/cv.html">CV</a></li>
                <li><a href="https://ashwin.info.tm/pages/research.html">Research</a></li>
                <li><a href="https://ashwin.info.tm/pages/software.html">Software</a></li>
                <li><a href="https://ashwin.info.tm/talks">Talks</a></li>
              </ol>
            </li>
            <li><a href="https://ashwin.info.tm/pages/sponsors.html">Sponsors</a></li>
            <li><a href="https://ashwin.info.tm/pages/planet.html">Planet</a></li>
            <li><a href="https://ashwin.info.tm/pages/contact.html">Contact</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="h-entry m-col-m-10 m-nopadb">
      <header>
        <h1><a href="https://ashwin.info.tm/back-to-arch-linux.html" rel="bookmark" class="u-url" title="Permalink to Back to Arch Linux">
          <time class="m-date" datetime="2020-01-03T10:00:41.042526+01:00">
            Jan <span class="m-date-day">03</span> 2020
          </time>
          <div class="p-name">
            Back to Arch Linux
          </div>
        </a></h1>
        <div class="p-summary">
        <p>Within a Ubuntu LTS pre-installed laptop</p>
        </div>
      </header>
      <div class="m-clearfix-l"></div>
<a href="https://brid.gy/publish/mastodon"></a>
<!-- content -->
<div class="e-content">
<section id="why">
<h2>Why</h2>
<p>It was October 2019. New job, new laptop.</p>
<p>I tried to tell myself to stay with the LTS that was given to me from the
Canonical and Dell overlords. To be honest, I did not remove Ubuntu from the
get-go was because I was unsure if I can run Nvidiaâ€™s CUDA toolkit on an
<a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64/">unlisted</a> OS. In my old laptop (2011-2014) on which I had a Nvidia GPU and
which ran Manjaro, I would frequently total my installation every time I ran
<code>pacman -Syu</code>. The X.org display server would just stop functioning and I
would be left with a terminal to figure out how to get back.</p>
<p>I thought I could just weed out the bloatware (Google Chrome, Amazon etc.)
and be content with what I have. Trust the Ubuntu and Dell repositories.</p>
<p>Fast-forward to January 2020.  Turns out, the project which I am on right now
may not get started with CUDA development soon. Therefore, a good OS and GCC
compiler toolchain is all that I need. I have a mutant Ubuntu LTS already with
all the hacks under the sun to stay up-to-date:</p>
<ul>
<li><a href="https://github.com/pyenv/pyenv/">pyenv</a> to have the latest Python</li>
<li><a href="https://flatpak.org/">flatpak</a> to install some applications which are <em>ancient</em> in the official <a href="https://packages.ubuntu.com/">Ubuntu repos</a> (Okular, Signal, KeepassXC, Zeal, Zotero etc.)</li>
<li><a href="https://appimage.org/">appimage</a> when <a href="https://flatpak.org/">flatpak</a>â€™s sandbox is too restrictive (Neovim)</li>
<li><a href="https://help.ubuntu.com/community/PPA">PPA</a> / unofficial <code>.deb</code> packages from GitHub when the start-up overhead of
<a href="https://flatpak.org/">flatpak</a> or <a href="https://appimage.org/">appimage</a> is way too high (Neovim, again ðŸ˜…) or similar reasons
as above (Nextcloud client, VSCodium etc.)</li>
</ul>
<p>This is not good at all, I hear you. And I have to wait a good <a href="https://www.omgubuntu.co.uk/2019/10/ubuntu-20-04-release-features">4 more months</a>
for the next LTS release! The final blow came when I saw Vim 8.2 was released
last month with <a href="https://github.com/skywind3000/vim-quickui">popup</a> support, and I do not have it yet! There is no practical
way (apart from yet another <a href="https://help.ubuntu.com/community/PPA">PPA</a>) to get the latest Vim, without compiling it
from source. Either ways, it is also unacceptable to run a desktop environment
(GNOME) which is lagging behind (version 3.28.2) the latest stable release
(version 3.34) for so long!</p>
</section>
<section id="how">
<h2>How</h2>
<aside class="m-note m-danger">
Make sure you understand what how <code>chroot</code> and <code>mount</code> commands work.
Also do not run <code>rm -rf</code> at any stage below.</aside>
<p>There is a nice <a href="https://wiki.archlinux.org/index.php/Install_Arch_Linux_from_existing_Linux#From_a_host_running_another_Linux_distribution">guide</a> which demonstrates how to setup Arch Linux from an
existing Linux OS. I started off by <a href="https://www.archlinux.org/download/">downloading</a> the bootstrap image along with
the GPG signature and verifying it:</p>
<pre>$ gpg --keyserver-options auto-key-retrieve --verify archlinux-2020.01.01-x86_64.iso.sig
gpg: assuming signed data in 'archlinux-2020.01.01-x86_64.iso'
gpg: Signature made Wed 01 Jan 2020 06:21:41 AM CET
gpg:                using RSA key 4AA4767BBC9C4B1D18AE28B77F2D434B9741E8AC
gpg: Good signature from &quot;Pierre Schmitz &lt;pierre&#64;archlinux.de&gt;&quot; [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 4AA4 767B BC9C 4B1D 18AE  28B7 7F2D 434B 9741 E8AC</pre>
<p>The key fingerprint was <a href="https://www.archlinux.org/master-keys/">cross-checked</a> to be doubly sure.
Then I extracted the bootstrap image:</p>
<pre>$ sudo su
# tar xzf archlinux-bootstrap-2020.01.01-x86_64.tar.gz -C /tmp</pre>
<p>When I skipped a few steps and went into the <code>chroot</code>, I got this:</p>
<pre># /tmp/root.x86_64/bin/arch-chroot /tmp/root.x86_64/
==&gt; WARNING: /mnt/archlinux/root.x86_64/ is not a mountpoint. This may have undesirable side effects.</pre>
<p>I <a href="https://bugs.archlinux.org/task/46169">understood</a> that the <code>chroot</code> should be a mount point:</p>
<pre># mount --bind /tmp/root.x86_64 /tmp/root.x86_64
# /tmp/root.x86_64/bin/arch-chroot /tmp/root.x86_64/</pre>
<p>And the <code>chroot</code> worked without any warnings. To clarify the shell I am
running I will prefix the commands with <code>[chroot] #</code> from here on:</p>
<pre>[chroot] # pacman-key --init
[chroot] # pacman-key --populate archlinux</pre>
<p>After editing the mirror list outside of the <code>chroot</code>:</p>
<pre>$ sudoedit /tmp/root.x86_64/etc/pacman.d/mirrorlist</pre>
<p>I updated the bootstrap:</p>
<pre>[chroot] # pacman -Syyu</pre>
<p>And mounted the partitions to be bootstrapped:</p>
<pre>[chroot] # mount /dev/nvme0n1p5 /mnt
[chroot] # mount /dev/nvme0n1p4 /mnt/home
[chroot] # genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
[chroot] # umount /mnt/home</pre>
<aside class="m-note m-info">
In preparation, I had created these partitions by shrinking the existing ones
with a <a href="https://distrowatch.com/table.php?distribution=gparted">GParted</a> USB live medium, long time ago.  The home partition was also
created and made separate such that it can be shared between Ubuntu and Arch
Linux for a dual-boot setup.</aside>
<p>and installed some essentials:</p>
<pre>[chroot] # pacman -S base base-devel
:: There are 24 members in group base-devel:
:: Repository core
   1) autoconf  2) automake  3) binutils  4) bison  5) fakeroot  6) file
   7) findutils  8) flex  9) gawk  10) gcc  11) gettext  12) grep  13) groff
   14) gzip  15) libtool  16) m4 17) make  18) pacman  19) patch  20) pkgconf
   21) sed  22) sudo  23) texinfo  24) which
...</pre>
<p>Did the same for the target Arch Linux partition mounted at <code>/mnt</code>:</p>
<pre>[chroot] # pacstrap /mnt base base-devel
[chroot] # pacstrap /mnt linux-lts linux-firmware intel-ucode lsb-release</pre>
<p>Thereafter I followed the official <a href="https://wiki.archlinux.org/index.php/Installation_guide#Configure_the_system">installation guide</a>:</p>
<pre>[chroot] # arch-chroot /mnt</pre>
<aside class="m-note m-info">
The step above runs <code>arch-chroot</code> from within a <code>chroot</code>. Now, I see why
Leo was so confused in Inception. Whenever in doubt, run <code>df</code>.</aside>
</section>
<section id="cleaning-up-and-dual-booting">
<h2>Cleaning up and dual booting</h2>
<p>Exit the <code>chroot</code> and unmount everything:</p>
<pre>[chroot in a chroot] # exit
[chroot] # exit
# umount -R /tmp/root.x86_64</pre>
<p>The Ubuntu installation came with a <a href="https://wiki.archlinux.org/index.php/GRUB#Detecting_other_operating_systems">GRUB</a> boot loader and <code>os-loader</code> package
which should detect the new Arch Linux installation (since we installed the
<code>lsb-release</code> package). To make it happen, reboot? from Ubuntu run:</p>
<pre># sudo update-grub</pre>
<p>That did not work! <a href="https://askubuntu.com/questions/111085/how-do-i-hide-the-grub-menu-showing-up-at-the-beginning-of-boot">Turns out</a> <code>/etc/default/grub</code> had two offending lines:</p>
<pre>GRUB_TIMEOUT_STYLE=hidden
GRUB_DISABLE_OS_PROBER=true</pre>
<p>which when commented out, it started working. Follow this by <code>update-grub</code> or
<code>grub-mkconfig -o /boot/grub/grub.cfg</code> and it is good to go.</p>
</section>
<section id="epilogue-some-personal-choices">
<h2>Epilogue: some personal choices</h2>
<p>What follows below are not necessary but I note it down for future reference.
Here are the packages I chose to install:</p>
<pre>neovim vim code  # editors
plasma kdegraphics-thumbnailers # KDE desktop meta package
konsole
acpi
inetutils  # many network commands, including hostname
openssh
parted  # partitioning tool
xonsh zsh # alternatives to bash
tlp  # CPU and FAN governor
man-db  # man pages
arch-wiki-docs  # provides wiki-search
arch-wiki-lite  # and wiki-search-html commands
ttf-joypixels ttf-roboto adobe-source-sans-pro-fonts adobe-source-serif-pro-fonts ttf-arphic-uming terminus-font  # extra fonts
libreoffice-fresh  # writer, calc, impress...
gcc-fortran gcc-go rust  # compilers
pacman-contrib reflector  # pacman utilities
firefox thunderbird zeal okular ark nextcloud-client mplayer  # ... and more applications
flatpak  # for sandboxing non-free applications</pre>
<p>An AUR helper:</p>
<pre>$ git clone https://aur.archlinux.org/yay.git
$ cd yay &amp;&amp; makepkg -s
# pacman -U /home/avmo/.cache/makepkg/yay-*</pre>
<p>Check and activate periodic <a href="https://wiki.archlinux.org/index.php/Solid_state_drive#TRIM">TRIM</a> for long-term performance:</p>
<pre>$ lsblk --discard
NAME        DISC-ALN DISC-GRAN DISC-MAX DISC-ZERO
nvme0n1            0      512B       2T         0
|-nvme0n1p1        0      512B       2T         0
|-nvme0n1p2        0      512B       2T         0
|-nvme0n1p3        0      512B       2T         0
|-nvme0n1p4        0      512B       2T         0
|-nvme0n1p5        0      512B       2T         0
`-nvme0n1p6        0      512B       2T         0

# systemctl enable fstrim.timer
Created symlink /etc/systemd/system/timers.target.wants/fstrim.timer â†’ /usr/lib/systemd/system/fstrim.timer.</pre>
<p>Format a <a href="https://wiki.archlinux.org/index.php/Swap">swap</a> partition in the empty space available and mount it with <a href="https://wiki.archlinux.org/index.php/Solid_state_drive#TRIM">TRIM</a>
(<code>discard</code>) support:</p>
<pre># parted /dev/nvme0n1
GNU Parted 3.3
Using /dev/nvme0n1
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) print
Model: KXG60ZNV512G NVMe TOSHIBA 512GB (nvme)
Disk /dev/nvme0n1: 512GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start   End     Size    File system  Name                  Flags
 1      1049kB  819MB   818MB   fat32        EFI system partition  boot, esp
 2      819MB   6188MB  5369MB  fat32        Basic data partition  msftres
 3      6188MB  140GB   134GB   ext4
 4      194GB   301GB   107GB   btrfs
 5      405GB   512GB   107GB   ext4

(parted) mkpart primary linux-swap 140GB 194GB
(parted) print
Model: KXG60ZNV512G NVMe TOSHIBA 512GB (nvme)
Disk /dev/nvme0n1: 512GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start   End     Size    File system     Name                  Flags
 1      1049kB  819MB   818MB   fat32           EFI system partition  boot, esp
 2      819MB   6188MB  5369MB  fat32           Basic data partition  msftres
 3      6188MB  140GB   134GB   ext4
 6      140GB   194GB   53.7GB  linux-swap(v1)  primary
 4      194GB   301GB   107GB   btrfs
 5      405GB   512GB   107GB   ext4

(parted) quit
# mkswap /dev/nvme0n1p6
Setting up swapspace version 1, size = 50 GiB (53687087104 bytes)
no label, UUID=6ce1daf4-6a66-44a8-a14b-bd4ea3eb9c40
# swapon --discard
# echo &quot;UUID=6ce1daf4-6a66-44a8-a14b-bd4ea3eb9c40 none swap defaults,discard 0 0&quot; &gt;&gt; /etc/fstab</pre>
<p>Installed an alternative shell (as listed in <code>/etc/shells</code>) and added myself
as a user:</p>
<pre># useradd --no-create-home --uid 1001 --user-group avmo --shell /usr/bin/xonsh
# passwd avmo</pre>
<p>Then to make the desktop and essential components appear:</p>
<pre># systemctl enable sddm NetworkManager tlp</pre>
<p>Configure sensors from <code>lm_sensors</code>:</p>
<pre># sensors-detect
# sensors
Adapter: ISA adapter
Package id 0:  +45.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 0:        +45.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 1:        +44.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 2:        +44.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 3:        +47.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 4:        +42.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
Core 5:        +42.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)

dell_smm-virtual-0
Adapter: Virtual device
fan1:        2288 RPM
fan2:        2317 RPM

pch_cannonlake-virtual-0
Adapter: Virtual device
temp1:        +55.0Â°C

acpitz-acpi-0
Adapter: ACPI interface
temp1:        +25.0Â°C  (crit = +107.0Â°C)

iwlwifi-virtual-0
Adapter: Virtual device
temp1:        +48.0Â°C

BAT0-acpi-0
Adapter: ACPI interface
in0:          12.80 V
curr1:       1000.00 uA</pre>
</section>
<section id="nvidia">
<h2>Nvidia</h2>
<p>The riskiest part, IMHO, although it is well <a href="https://wiki.archlinux.org/index.php/NVIDIA">documented</a>. The driver package
depends on the GPU model and the kernel. Thankfully no kernel panic occurred by
installing:</p>
<pre># pacman -S nvidia xorg-xrandr</pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If anything goes wrong, it often helped by simply clearing up
<code>/etc/X11/xorg.conf.d</code>.</p>
</div>
<section id="option-1-nvidia-alone">
<h3>Option 1: Nvidia alone</h3>
<p>Tried:</p>
<pre># nvidia-xconfig</pre>
<p>However, SDDM did not start when X server was configured to use <code>nvidia</code>
display driver. The key was to run some commands <a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#SDDM">before SDDM</a> starts, with
the following lines in <code>/usr/share/sddm/scripts/Xsetup</code>.</p>
<pre class="m-code">xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto</pre>
</section>
<section id="option-2-optimus-prime">
<h3>Option 2: Optimus Prime</h3>
<p>After reading a bit more, I chose NOT to do Option 1, but instead go for
<a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Using_PRIME_render_offload">switchable</a> graphics. The following package provides a <code>prime-run</code> command
and a X server configuration:</p>
<pre># pacman -S nvidia-prime</pre>
<p>Rebooted and verified it:</p>
<pre>$ xrandr --listproviders
Providers: number : 2
Provider 0: id: 0x48 cap: 0xf, Source Output, Sink Output, Source Offload, Sink Offload crtcs: 3 outputs: 6 associated providers: 0 name:modesetting
Provider 1: id: 0x2a3 cap: 0x0 crtcs: 0 outputs: 0 associated providers: 0 name:NVIDIA-G0

# pacman -S mesa-demos
$ prime-run glxinfo | grep OpenGL</pre>
</section>
<section id="finally">
<h3>Finally</h3>
<p>There was a small <a href="https://bbs.archlinux.org/viewtopic.php?id=251919">hiccup</a> in detecting the external HDMI monitor. Turns out it
was <a href="https://git.archlinux.org/svntogit/packages.git/commit/trunk?h=packages/nvidia-utils&amp;id=65ce50c4fd7388e91987cd2d271881e4ae126902">regression</a> due to a change in <code>nvidia-utils</code>. It was fixed by adding
back the line:</p>
<pre>Option &quot;PrimaryGPU&quot; &quot;yes&quot;</pre>
<p>to <code>/usr/share/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code>.</p>
</section>
</section>
<section id="cuda">
<h2>CUDA</h2>
<p><a href="https://wiki.archlinux.org/index.php/GPGPU#CUDA">Installation</a>:</p>
<pre># pacman -S cuda</pre>
<p>Testing:</p>
<pre>$ cp -r /opt/cuda/samples/ .
$ cd samples/1_Utilities/deviceQuery
$ make
$ ./deviceQuery
./deviceQuery Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

Detected 1 CUDA Capable device(s)

Device 0: &quot;Quadro RTX 3000&quot;
  CUDA Driver Version / Runtime Version          10.2 / 10.2
  CUDA Capability Major/Minor version number:    7.5
  Total amount of global memory:                 5935 MBytes (6222839808 bytes)
  (30) Multiprocessors, ( 64) CUDA Cores/MP:     1920 CUDA Cores
  GPU Max Clock rate:                            1380 MHz (1.38 GHz)
  Memory Clock rate:                             7001 Mhz
  Memory Bus Width:                              192-bit
  L2 Cache Size:                                 3145728 bytes
  Maximum Texture Dimension Size (x,y,z)         1D=(131072), 2D=(131072, 65536), 3D=(16384, 16384, 16384)
  Maximum Layered 1D Texture Size, (num) layers  1D=(32768), 2048 layers
  Maximum Layered 2D Texture Size, (num) layers  2D=(32768, 32768), 2048 layers
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 65536
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  1024
  Maximum number of threads per block:           1024
  Max dimension size of a thread block (x,y,z): (1024, 1024, 64)
  Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and kernel execution:          Yes with 3 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support:                        Disabled
  Device supports Unified Addressing (UVA):      Yes
  Device supports Compute Preemption:            Yes
  Supports Cooperative Kernel Launch:            Yes
  Supports MultiDevice Co-op Kernel Launch:      Yes
  Device PCI Domain ID / Bus ID / location ID:   0 / 1 / 0
  Compute Mode:
     &lt; Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) &gt;

deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 10.2, CUDA Runtime Version = 10.2, NumDevs = 1
Result = PASS</pre>
</section>
<section id="docker">
<h2>Docker</h2>
<p>Installing <a href="https://wiki.archlinux.org/index.php/Docker#Installation">docker</a> is straightforward, but I wanted to avoid adding my default
login into the <code>docker</code> group which is root equivalent. So I created a
special user to do this:</p>
<pre># pacman -S docker
# systemctl start docker
# useradd --no-create-home -g docker docker
# passwd
$ su - docker</pre>
</section>
</div>
<!-- /content -->
      <div class="m-block m-success m-badge">
        <img src="https://ashwin.info.tm/images/dp_ashwin_2016.jpg" alt="Ashwin Vishnu Mohanan" />
        <h3>About the author</h3>
        <p>Ashwin Vishnu Mohanan, Ph.D. in Fluid mechanics</p>
      </div>
      <footer>
        <p>Posted by <a rel="author" href="https://ashwin.info.tm/author/ashwin-vishnu-mohanan.html">Ashwin Vishnu Mohanan</a> on <time datetime="2020-01-03T10:00:41.042526+01:00" class="dt-published">Fri 03 January 2020</time> in <a class="p-category" href="https://ashwin.info.tm/category/tech-talk.html">Tech Talk</a>. <span class="m-label m-success">updated <time datetime="2020-01-13T00:00:00+01:00" class="dt-updated">Mon 13 January 2020</time></span> Tags: <a href="https://ashwin.info.tm/tag/software.html">software</a>, <a href="https://ashwin.info.tm/tag/linux.html">linux</a>, <a href="https://ashwin.info.tm/tag/ubuntu.html">ubuntu</a>, <a href="https://ashwin.info.tm/tag/archlinux.html">archlinux</a>.<time class="dt-read-mins">
            <svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em"
              viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            8
        minutes
          </time></p>
      </footer>
    </article>
    <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="https://ashwin.info.tm/category/blog.html">Blog</a></li>
        <li><a href="https://ashwin.info.tm/category/blogger-archive.html">Blogger archive</a></li>
        <li><a href="https://ashwin.info.tm/category/tech-talk.html">Tech Talk</a></li>
        <li><a href="https://ashwin.info.tm/category/tumblr-archive.html">Tumblr archive</a></li>
      </ol>
      <h3>Tag cloud</h3>
      <ul class="m-tagcloud">
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/academia.html">academia</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/archlinux.html">archlinux</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/automation.html">automation</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/brainwaves.html">brainwaves</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/ci.html">ci</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/conference.html">conference</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/congress.html">congress</a></li>
        <li class="m-tag-2"><a href="https://ashwin.info.tm/tag/covid-19.html">covid-19</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/csharp.html">csharp</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/devops.html">devops</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/economy.html">economy</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/emotion.html">emotion</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/fediverse.html">fediverse</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/fluid-mechanics.html">fluid-mechanics</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/fluiddyn.html">fluiddyn</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/fluidfft.html">fluidfft</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/fluidsim.html">fluidsim</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/friends.html">friends</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/game-of-thrones.html">game of thrones</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/helloworld.html">helloworld</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/hpc.html">hpc</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/india.html">India</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/indian-politics.html">indian politics</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/internet.html">Internet</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/introduction.html">introduction</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/java.html">java</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/kindness.html">kindness</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/licensing.html">licensing</a></li>
        <li class="m-tag-5"><a href="https://ashwin.info.tm/tag/life.html">life</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/linux.html">linux</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/list.html">list</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/markdown.html">markdown</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/mood.html">mood</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/motto.html">motto</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/music.html">music</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/open-access.html">open-access</a></li>
        <li class="m-tag-2"><a href="https://ashwin.info.tm/tag/open-source.html">open-source</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/optimization.html">optimization</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/phone.html">phone</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/poetry.html">poetry</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/postdoc.html">postdoc</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/privacy.html">privacy</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/psychology.html">psychology</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/pyconse.html">pyconse</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/pypy.html">pypy</a></li>
        <li class="m-tag-2"><a href="https://ashwin.info.tm/tag/python.html">python</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/rant.html">rant</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/recession.html">recession</a></li>
        <li class="m-tag-2"><a href="https://ashwin.info.tm/tag/research.html">research</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/resolution.html">resolution</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/rst.html">rst</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/rust.html">rust</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/social-media.html">social media</a></li>
        <li class="m-tag-3"><a href="https://ashwin.info.tm/tag/software.html">software</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/strangers.html">strangers</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/survival.html">survival</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/sympy.html">sympy</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/teenage.html">teenage</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/thin-line.html">thin line</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/til.html">til</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/tips.html">tips</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/today-i-learned.html">today i learned</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/transonic.html">transonic</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/travel.html">travel</a></li>
        <li class="m-tag-3"><a href="https://ashwin.info.tm/tag/tumblr.html">tumblr</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/ubuntu.html">ubuntu</a></li>
        <li class="m-tag-2"><a href="https://ashwin.info.tm/tag/uncategorized.html">Uncategorized</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/vim.html">vim</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/wordporm.html">wordporm</a></li>
        <li class="m-tag-1"><a href="https://ashwin.info.tm/tag/writing.html">writing</a></li>
      </ul>
    </nav>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div id="m-links-footer" class="m-row">
      <div class="m-col-s-3 m-col-t-6">
        <h3>Social</h3>
        <ul>
          <li><a href="https://github.com/ashwinvis">GitHub</a></li>
          <li><a href="https://source.coderefinery.org/ashwinvis/">Gitlab</a></li>
          <li><a href="https://foss.heptapod.net/avmo">Heptapod</a></li>
          <li><a href="https://www.linkedin.com/in/ashwinvishnu/">LinkedIn</a></li>
          <li><a href="https://mastodon.acc.sunet.se/@ashwinvis">Mastodon</a></li>
        </ul>
      </div>
      <div class="m-col-s-3 m-col-t-6">
        <h3>Research</h3>
        <ul>
          <li><a href="https://zotero.org/ashwinvis">Zotero</a></li>
          <li><a href="https://www.researchgate.net/profile/Ashwin_Vishnu_Mohanan">ResearchGate</a></li>
          <li><a href="https://scholar.google.se/citations?user=zv4wwKoAAAAJ">Google-Scholar</a></li>
          <li><a href="https://orcid.org/0000-0002-2979-6327">ORCID</a></li>
          <li><a href="https://zenodo.org/search?page=1&amp;size=20&amp;q=Mohanan,%20Ashwin%20Vishnu">Zenodo</a></li>
        </ul>
      </div>
      <div class="m-clearfix-t"></div>
      <div class="m-col-s-3 m-col-t-6">
        <h3>Sitemap</h3>
        <ul>
          <li><a href="https://ashwin.info.tm/feeds/all.atom.xml">Feeds</a></li>
          <li><a href="https://ashwin.info.tm/feeds/blog.atom.xml">Feeds: Blog</a></li>
          <li><a href="https://ashwin.info.tm/feeds/tech-talk.atom.xml">Feeds: Tech Talk</a></li>
          <li><a href="https://ashwin.info.tm/pages/showcase.html">Showcase</a></li>
          <li><a href="https://ashwin.info.tm/pages/sponsors.html">Sponsors</a></li>
          <li><a href="https://ashwin.info.tm/pages/planet.html">Planet</a></li>
          <li><a href="https://ashwin.info.tm/pages/contact.html">Contact</a></li>
        </ul>
      </div>
      <div class="m-col-s-3 m-col-t-6">
        <h3><a href="https://ashwin.info.tm/">Posts</a></h3>
        <ul>
          <li><a href="https://ashwin.info.tm/category/blog.html">Blog</a></li>
          <li><a href="https://ashwin.info.tm/category/blogger-archive.html">Blogger archive</a></li>
          <li><a href="https://ashwin.info.tm/category/tech-talk.html">Tech Talk</a></li>
          <li><a href="https://ashwin.info.tm/category/tumblr-archive.html">Tumblr archive</a></li>
        </ul>
      </div>
    </div>
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>
        <img alt="license" src="/images/cc-by.svg" style="height: 31px" /><br />
        Except where otherwise noted, content on this site is licensed under <a href="https://github.com/ashwinvis/ashwinvis.github.io/blob/develop/content/LICENSE">CC-BY 4.0</a> | Ashwin Vishnu Mohanan 2010 - 2020<br />
        <a href="https://keys.openpgp.org/vks/v1/by-fingerprint/05A85046340A0249B9EFF1572BF1534545A73FAD">GnuPG: 45A73FAD</a> | <a href="https://www.svgbackgrounds.com/">Cover photo credit</a><br />
        </p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>