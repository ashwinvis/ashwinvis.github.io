branches:
  only:
  - develop
language: python
cache: pip
python:
- 3.6

install:
- pip install -U pipenv
- pipenv install
- pelican-themes -i theme/pelican-themes/backdrop

script:
- cd src
- rst-lint content/*.rst
- make html

deploy:
  provider: pages
  skip-cleanup: true
  github-token: "$GITHUB_TOKEN"
  keep-history: true
  target-branch: master
  name: Travis CI
  local-dir: "./output"
  on:
    branch: develop
